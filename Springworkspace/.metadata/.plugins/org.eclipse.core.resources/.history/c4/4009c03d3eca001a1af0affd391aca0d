package com.withpet.app;

import javax.servlet.http.HttpServletRequest;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import calendar.CalendarServiceImpl;

@Controller
public class CalendarController {
	@Autowired private CalendarServiceImpl service;
	
	//검진기록가져오기
	@RequestMapping(value = "/anDiagnosisGet"
					, method = { RequestMethod.GET, RequestMethod.POST }
					, produces = "text/html; charset=utf-8")
	public String anDiagnosisGet(HttpServletRequest req, Model model) {
		int pet = Integer.parseInt(req.getParameter("d_pet"));
		service.anDiagnosisGet(pet);
		
		return "calendar/anDiagnosisGet";
	}
	
	// 동물정보 저장
	@RequestMapping(value = "/anCalendarInsert"
					, method = { RequestMethod.GET, RequestMethod.POST }
					, produces = "text/html; charset=utf-8")
	public String anCalendarInsert(HttpServletRequest req, Model model) {
		String tel = (String) req.getParameter("tel");
		String year = (String) req.getParameter("year");
		String month = (String) req.getParameter("month");
		String date = (String) req.getParameter("date");
		String content = (String) req.getParameter("content");

		model.addAttribute("tel", tel);
		model.addAttribute("year", year);
		model.addAttribute("month", month);
		model.addAttribute("date", date);
		model.addAttribute("content", content);

		command = new ACalendarInsert();
		command.execute(model);

		return "anCalendarInsert";
	}// anPet
	
}
